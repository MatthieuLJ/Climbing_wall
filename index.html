<!DOCTYPE html>
<html>
    <head>

        <style>
html, body {
    height: 100%;
    margin: 0px;
}

.zoom {
    height: 100%;
    width: 100%;
    border: 1px;
    border-style: solid;
}

        </style>

        <title>
            The magic climbing wall
        </title>
    </head>
    <body>
        <div class="zoom">
			<img id="wall" src="./wall.jpg"/>
        </div>

<!-- from https://github.com/ironexdev/zoom -->
<script src="./zoom.js"></script>
<script type="text/javascript">

var wall = document.getElementById("wall");
var wall_height = wall.naturalHeight;
var wall_width = wall.naturalWidth;
console.log("Size of wall is "+wall_width+" x "+wall_height);

window.addEventListener("load", function () {
    recalculate_max_zoom();
});

window.addEventListener("resize", function () {
    recalculate_max_zoom();
});

function recalculate_max_zoom() {
    // Need to recompute this when the window is resized
    var window_height = window.innerHeight;
    var window_width = window.innerWidth;

    console.log("Size of window is "+window_width+" x "+window_height);

    var min_scale = Math.max(window_height / wall_height , window_width / wall_width);
    zoom({}, {
        scaleMax: 5,
        scaleMin: min_scale
    });
    console.log("zoom from "+min_scale);
}

</script>
    </body>
</html>
